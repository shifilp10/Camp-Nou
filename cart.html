<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CAMP NOU - Cart & Bill</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

<!-- html2pdf library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  min-height: 100vh;
  font-family: 'Montserrat', sans-serif;
  color: #fff;
  background: url('https://wallpapercave.com/wp/wp2969205.jpg') center/cover no-repeat fixed;
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  z-index: 0;
}

header, section, footer { position: relative; z-index: 1; }

header {
  position: sticky;
  top: 0;
  background: rgba(0,0,0,0.75);
  backdrop-filter: blur(8px);
  z-index: 10;
}

.navbar {
  max-width: 1300px;
  margin: auto;
  padding: 20px 25px;
}

nav {
  display: flex;
  justify-content: center;
  gap: 26px;
}

nav a {
  color: #fff;
  text-decoration: none;
  font-weight: 600;
  position: relative;
}

nav a::after {
  content: "";
  position: absolute;
  left: 50%;
  bottom: -6px;
  width: 0;
  height: 2px;
  background: #ff0000;
  transform: translateX(-50%);
  transition: 0.3s;
}

nav a:hover::after,
nav a.active::after { width: 100%; }

#cart {
  max-width: 1200px;
  margin: 80px auto;
  padding: 35px;
  background: rgba(0,0,0,0.75);
  border-radius: 18px;
}

#cart h2 {
  text-align: center;
  color: #ff0000;
  margin-bottom: 25px;
}

.cart-table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 20px;
}

.cart-table th,
.cart-table td {
  border: 1px solid #333;
  padding: 12px;
  text-align: center;
}

.cart-table th {
  background: #1a1a1a;
  color: #ff0000;
}

.cart-total {
  text-align: right;
  margin-top: 20px;
  font-size: 1.4em;
  color: #ff0000;
}

button {
  padding: 6px 12px;
  border-radius: 6px;
  border: none;
  cursor: pointer;
}

.qty-btn { background: #333; color: #fff; }
.remove-btn { background: #ff0000; color: #fff; }

.action-buttons {
  text-align: center;
  margin-top: 30px;
}

.action-buttons button {
  padding: 10px 25px;
  border-radius: 25px;
  margin: 10px;
}

#checkoutBtn { background: #ff0000; color: #fff; }

/* ---------- POPUPS ---------- */
.popup {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0);
  background: rgba(26,26,26,0.95);
  padding: 30px 40px;
  border-radius: 20px;
  text-align: center;
  z-index: 100;
  opacity: 0;
  transition: 0.4s ease;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 8px 25px rgba(0,0,0,0.7);
}

.popup.active {
  transform: translate(-50%, -50%) scale(1);
  opacity: 1;
}

.popup h2, .popup h3 {
  color: #ff0000;
  margin-bottom: 15px;
}

.popup p {
  font-size: 1.1em;
  margin-bottom: 20px;
}

.popup button {
  background: #ff0000;
  color: #fff;
  border: none;
  padding: 12px 28px;
  font-size: 1em;
  font-weight: 600;
  border-radius: 25px;
  cursor: pointer;
  transition: 0.3s;
}

.popup button:hover {
  background: #e60000;
}

/* ---------- BILL POPUP ---------- */
#billPopup {
  width: 90%;
  max-width: 750px;
  background: url('https://wallpapercave.com/wp/wp2969205.jpg') center/cover;
  padding: 30px 40px;
  border-radius: 20px;
  overflow: auto;
  color: #fff;
}

#billPopup h2 {
  text-align: center;
  margin-bottom: 20px;
  color: #ff2a2a;
}

/* CUSTOMER FORM */
#customerForm input {
  width: 95%;
  padding: 8px;
  margin: 8px 0;
  border-radius: 6px;
  border: none;
}

#customerForm label {
  display: block;
  margin-top: 10px;
  font-weight: 600;
}

/* BILL CONTENT */
#billContent {
  background: url('') center/cover;
  padding: 15px;
  border-radius: 15px;
  color: #fff;
  display: none;
}

#billContent table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 20px;
  background: rgba(0,0,0,0.6);
  border-radius: 10px;
}

#billContent th, #billContent td {
  border: 1px solid #fff;
  padding: 10px;
  text-align: center;
}

#billContent th {
  background: rgba(255,0,0,0.8);
  color: #fff;
}

#billContent tfoot td {
  font-weight: bold;
  background: rgba(255,0,0,0.2);
}

#voteThanks {
  text-align: center;
  margin-top: 20px;
  font-size: 1.3em;
  color: #ff2a2a;
}

/* ---------- BUTTONS ALIGNMENT ---------- */
.bill-buttons {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 20px;
}

.bill-buttons button {
  padding: 10px 25px;
  border-radius: 25px;
  border: none;
  cursor: pointer;
  background: #ff0000;
  color: #fff;
  font-weight: 600;
  transition: 0.3s;
}

.bill-buttons button:hover {
  background: #e60000;
}

footer {
  text-align: center;
  padding: 25px;
  background: rgba(0,0,0,0.6);
  color: #ff0000;
}
</style>
</head>

<body>

<header>
  <div class="navbar">
    <nav>
      <a href="index.html">Home</a>
      <a href="products.html">Jerseys</a>
      <a href="cart.html" class="active">Cart</a>
      <a href="contact.html">Contact</a>
    </nav>
  </div>
</header>

<section id="cart">
  <h2>Your Cart</h2>

  <table class="cart-table" id="cartTable">
    <thead>
      <tr>
        <th>Product</th>
        <th>Price</th>
        <th>Qty</th>
        <th>Subtotal</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <div class="cart-total" id="cartTotal"></div>

  <div class="action-buttons">
    <button id="checkoutBtn">Checkout</button>
  </div>
</section>

<!-- EMPTY CART POPUP -->
<div class="popup" id="emptyPopup">
  <h3>Your Cart Is Empty</h3>
  <p>ðŸ›’ Please add items to your cart before continuing.</p>
  <button onclick="closeEmptyPopup()">Close</button>
</div>

<!-- BILL POPUP -->
<div class="popup" id="billPopup">
  <h2>Invoice / Bill</h2>

 <form id="customerForm">
  <label for="custName">Name:</label>
  <input type="text" id="custName" required placeholder="Enter your name">

  <label for="custAddress">Address:</label>
  <input type="text" id="custAddress" required placeholder="Enter your address">

  <label for="custNumber">Customer Number:</label>
  <input type="text" id="custNumber" required placeholder="Enter customer number">

  <label for="custEmail">Email:</label>
  <input type="email" id="custEmail" required placeholder="Enter email">

  <label for="custCard">Credit Card:</label>
  <input type="text" id="custCard" required placeholder="XXXX-XXXX-XXXX-XXXX">

  <label for="custCVV">CVV:</label>
  <input type="password" id="custCVV" required placeholder="***">

  <div class="bill-buttons">
    <button type="button" onclick="generateBill()">Generate & Download Bill</button>
    <button type="button" onclick="closeBill()">Close</button>
  </div>
</form>


 <div id="billContent">
  <p><strong>Customer Name:</strong> <span id="billName"></span></p>
  <p><strong>Customer Number:</strong> <span id="billNumber"></span></p>
  <p><strong>Address:</strong> <span id="billAddress"></span></p>
  <p><strong>Email:</strong> <span id="billEmail"></span></p>


    <table id="billTable">
      <thead>
        <tr>
          <th>Jersey Name</th>
          <th>Price</th>
          <th>Qty</th>
          <th>Subtotal</th>
        </tr>
      </thead>
      <tbody></tbody>
      <tfoot>
        <tr>
          <td colspan="3">Delivery Charge</td>
          <td id="deliveryCharge">$0.00</td>
        </tr>
        <tr>
          <td colspan="3">Grand Total</td>
          <td id="grandTotal">$0.00</td>
        </tr>
      </tfoot>
    </table>

    <div id="voteThanks">Thank you for shopping with CAMP NOU!</div>
  </div>
</div>

<footer>Â© 2025 CAMP NOU. All Rights Reserved.</footer>

<script>
let cart = JSON.parse(localStorage.getItem("cart")) || [];
const deliveryCharge = 5;

const emptyPopup = document.getElementById("emptyPopup");
const billPopup = document.getElementById("billPopup");

function saveCart() {
  localStorage.setItem("cart", JSON.stringify(cart));
}

function renderCart() {
  const tbody = document.querySelector("#cartTable tbody");
  const totalDiv = document.getElementById("cartTotal");
  tbody.innerHTML = "";
  let total = 0;

  if (!cart.length) {
    totalDiv.textContent = "";
    return;
  }

  cart.forEach((item, i) => {
    const subtotal = item.price * item.qty;
    total += subtotal;

    tbody.innerHTML += `
      <tr>
        <td>${item.name}</td>
        <td>$${item.price.toFixed(2)}</td>
        <td>
          <button class="qty-btn" onclick="changeQty(${i},-1)">âˆ’</button>
          ${item.qty}
          <button class="qty-btn" onclick="changeQty(${i},1)">+</button>
        </td>
        <td>$${subtotal.toFixed(2)}</td>
        <td><button class="remove-btn" onclick="removeItem(${i})">Remove</button></td>
      </tr>`;
  });

  totalDiv.textContent =
    `Total: $${(total + deliveryCharge).toFixed(2)} (including $${deliveryCharge} delivery)`;
}

function changeQty(i, c) {
  cart[i].qty = Math.max(1, cart[i].qty + c);
  saveCart();
  renderCart();
}

function removeItem(i) {
  cart.splice(i, 1);
  saveCart();
  renderCart();
}

function openEmptyPopup() {
  emptyPopup.classList.add("active");
  document.body.style.overflow = "hidden";
}

function closeEmptyPopup() {
  emptyPopup.classList.remove("active");
  document.body.style.overflow = "auto";
}

function openBill() {
  if (!cart.length) {
    openEmptyPopup();
    return;
  }
  billPopup.classList.add("active");
  document.body.style.overflow = "hidden";
  document.getElementById("customerForm").style.display = "block";
  document.getElementById("billContent").style.display = "none";
}

function closeBill() {
  billPopup.classList.remove("active");
  document.body.style.overflow = "auto";
}

function generateBill() {
  const name = document.getElementById("custName").value.trim();
  const address = document.getElementById("custAddress").value.trim();
  const number = document.getElementById("custNumber").value.trim();
  const email = document.getElementById("custEmail").value.trim();

  if (!name || !address || !number || !email) {
    alert("Please fill all customer details.");
    return;
  }

  document.getElementById("billName").textContent = name;
  document.getElementById("billAddress").textContent = address;
  document.getElementById("billNumber").textContent = number;
  document.getElementById("billEmail").textContent = email;

  const tbody = document.querySelector("#billTable tbody");
  tbody.innerHTML = "";
  let total = 0;

  cart.forEach(item => {
    const subtotal = item.price * item.qty;
    total += subtotal;

    tbody.innerHTML += `
      <tr>
        <td>${item.name}</td>
        <td>$${item.price.toFixed(2)}</td>
        <td>${item.qty}</td>
        <td>$${subtotal.toFixed(2)}</td>
      </tr>`;
  });

  document.getElementById("deliveryCharge").textContent = `$${deliveryCharge.toFixed(2)}`;
  document.getElementById("grandTotal").textContent =
    `$${(total + deliveryCharge).toFixed(2)}`;

  document.getElementById("customerForm").style.display = "none";
  document.getElementById("billContent").style.display = "block";

  setTimeout(() => {
    html2pdf().from(document.getElementById("billContent")).set({
      margin: 10,
      filename: `CAMP_NOU_Bill_${Date.now()}.pdf`,
      html2canvas: { scale: 2 },
      jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
    }).save();
  }, 300);
}


document.getElementById("checkoutBtn").onclick = openBill;

renderCart();
</script>

</body>
</html>
